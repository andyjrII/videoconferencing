<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NACOSS VIRTUAL MEETING</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script defer src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="/js/script.js" defer></script>
    <script src="/js/room.js"></script>
    <script src="https://kit.fontawesome.com/421d6e9a59.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js" integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous"></script>
    <script>
        const ROOM_ID = "<%= roomId %>";
        const ROOM_NAME = "<%= room.roomName %>";
        const MATRIC_NUMBER = "<%= user.matricNumber %>";
        const FULL_NAME = "<%= user.fullName %>";
    </script>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="/">
          <img src="/../../images/logo.png" width="30" height="30" alt="Logo">
          Room Name: <%= room.roomName %>
        </a>
        <ul class="navbar-nav">
            <li class="nav-item active">
              Room Description: <%= room.roomDescription %>
            </li>
        </ul>
    </nav>
    <div class="main">
        <div class="main-left">
            <!-- Video Area -->
            <div class="main-videos">
                <div id="video-grid"></div>
            </div>
            <div class="main-controls">
                <div class="main-controls-block">
                    <div class="main-controls-button" id="muteButton" onclick="muteUnmute()">
                        <i class="fa-solid fa-microphone"></i>
                        <span>Mute</span>
                    </div>
                    <div class="main-controls-button" id="playPauseVideo" onclick="playStop()">
                        <i class="fa-solid fa-video"></i>
                        <span>Stop Video</span>
                    </div>
                </div>
                <div class="main-controls-block">
                    <div class="main-controls-button" id="chat-btn" onclick="ShowChat(this)">
                        <i class="fa-solid fa-comment"></i>
                        <span>Chat</span>
                    </div>
                    <div class="main-controls-button">
                        <i class="fa-solid fa-people-group"></i>
                        <span>Participants</span>
                    </div>
                </div>
                <div class="main-controls-block">
                    <div class="main-controls-button leave-meeting">
                        <i class="fa-solid fa-arrow-right-from-bracket"></i>
                        <span>Leave Meeting</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-right">
            <!-- Chat Area -->
            <div class="main-header">
                <h6><span class="live"></span> LIVE CHAT</h6>
            </div>
            <div class="main-chat-window" id="main-chat-window">
                <ul class="messages" id="all-messages"></ul>
            </div>
            <div class="main-message-container">
                <input type="text" id="chat-message" placeholder="Type message & press enter to send">
                <button class="sendMsg" id="sendMsg">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>